# Game Recommendation Engine

This engine sorts lists of games for a player based on his/her preference. This can be used to personalize the
display order of games if there are large number of games to show so creates engagement and early conversion by
placing games that a player prefers on the top.

The core enabler of the solution is [Apache PredictionIO](http://predictionio.apache.org) which is an open source
machine learning server built on top of a state-of-the-art open source stack for developers and data scientists to
create predictive engines for any machine learning task.

## Development Notes

### Import data

In `data` folder:

```
$ python import_play_events.py --access_key <your access key>
```

### Query

Normal:

```
curl -H "Content-Type: application/json" -d '{ "player": 1, "games": [1, 2, 3, ...]}' \
http://localhost:8000/queries.json
```

Unknown Player:

```
curl -H "Content-Type: application/json" -d '{ "player": -1, "games": [1, 2, 3, ...]}' \
http://localhost:8000/queries.json
```

### Build
Run following command to build the engine:

```
pio build
```

### Train
Run following command to train the engine:

```
pio train -- --driver-memory 4g
```

### Deploy
Run following command to deploy the enging:

```
pio deploy
```

### Get recommendations for a specific player

```
curl -H "Content-Type: application/json" -d '{ "player": 136286, "games": [9759,9767,9773,9782,9784,9818,9876,9879,9880,9881,9882,9883,9884,9885,9886,9887,9888,9889,9890,9891,9892,9893,9894,9895,9896,9897,9898,9899,9900,9901,9902,9903,9904,9905,9906,9907,9908,9909,9910,9911,9912,9913,9914,9915,9916,9917,9918,9919,9920,9921,9922,9923,9924,9925,9926,9927,9928,9929,9930,9931,9932,9933,9934,9935,9936,9937,9938,9939,9940,9941,9942,9943,9944,9945,9946,9947,9948,9949,9950,9951,9952,9953,9954,9955,9956,9957,9958,9959,9960,9961,9962,9963,9964,9965,9966,9967,9968,9969,9970,9972,9973,9974,9975,9976,9977,9978,9979,9980,9981,9982,9983,9984,9985,9986,9987,9988,9989,9990,9991,9992,9993,9994,9995,9996,9997,9998,9999,10000,10001,10002,10003,10021,10022,10023,10024,10025,10026,10027,10028,10029,10030,10031,10032,10033,10034,10035,10041,10050,10051,10052,10053,10054,10055,10058,10061,10062,10067,10069,10070,10071,10072,10073,10074,10077,10078,10079,10080,10081,10083,10084,10132,10138,10139,10140,10142,10143,10145,10146,10147,10184,10190,10194,10196,10208,10213,10215,10224,10227,10232,10243,10245,10250,10262,10266,10271,10276,10278,10791,10799,10824,10839,10852,10857,10858,10859,10870,10881,11017,11030,11032,11033,11050,11144,11153,11492,11499,11517,11535,11560,11571,11579,11580,11581,11583,11585,11589,11598,11647,11663,11676,11692,11949,11972,12016,12048,12065,12068,12074,12076,12078,12091,12108,12120,12131]}' \
http://localhost:8000/queries.json
```

Result:

```
{"gameScores":[{"game":10142,"score":1.0498133460864616},{"game":10027,"score":0.6672977832251391},{"game":12120,"score":0.6221899680238565},{"game":10857,"score":0.5762358654229298},{"game":10140,"score":0.5532681466568885},{"game":12068,"score":0.5425771576617733},{"game":10084,"score":0.5239607383696021},{"game":10194,"score":0.4379464662007295},{"game":10041,"score":0.4366764557879719},{"game":9893,"score":0.4252220134505127},{"game":12091,"score":0.408244238538654},{"game":10074,"score":0.3733403513198468},{"game":9899,"score":0.3544364005953613},{"game":12131,"score":0.32947138597396913},{"game":10852,"score":0.31714321192935946},{"game":10058,"score":0.3041891115394998},{"game":12074,"score":0.2856252572208472},{"game":12108,"score":0.2809203003434224},{"game":10839,"score":0.26799737598825835},{"game":10083,"score":0.2400857960535776},{"game":11017,"score":0.21591214792965457},{"game":10858,"score":0.20236293051011034},{"game":11517,"score":0.19494722994603275},{"game":10245,"score":0.19351572230296443},{"game":9912,"score":0.18918201848340854},{"game":11692,"score":0.18572552075608306},{"game":10824,"score":0.18155491500242849},{"game":11598,"score":0.1771540007742886},{"game":10232,"score":0.1744772030540933},{"game":10213,"score":0.17122780855067937},{"game":11972,"score":0.16795924031880816},{"game":9978,"score":0.16639632206014343},{"game":11535,"score":0.16531354551021826},{"game":12048,"score":0.16138112175913544},{"game":11663,"score":0.1610612498370828},{"game":9884,"score":0.15958915622164827},{"game":11647,"score":0.15877491320499537},{"game":10132,"score":0.15823160338470366},{"game":10262,"score":0.15569133731477658},{"game":11492,"score":0.15087697758217788},{"game":10227,"score":0.14479820490194734},{"game":10799,"score":0.1353356666728236},{"game":9906,"score":0.12711071282049113},{"game":9981,"score":0.1268019237857232},{"game":10196,"score":0.1258427669734139},{"game":9910,"score":0.12550908723165694},{"game":10271,"score":0.12416491900651527},{"game":11050,"score":0.12260580713652508},{"game":11571,"score":0.1204511433297416},{"game":10208,"score":0.11925272872944781},{"game":10190,"score":0.11660966192804145},{"game":11153,"score":0.11371339165890171},{"game":10078,"score":0.11112894234478499},{"game":10147,"score":0.10794252886022537},{"game":11030,"score":0.10720601365301208},{"game":11949,"score":0.10610836829402959},{"game":12016,"score":0.10467257600071422},{"game":11589,"score":0.10246761711853203},{"game":10079,"score":0.1010873136531063},{"game":10278,"score":0.10065462638996969},{"game":12076,"score":0.09744395338365286},{"game":10139,"score":0.09400833868766711},{"game":10881,"score":0.09337325350017445},{"game":10000,"score":0.09328334216405276},{"game":9934,"score":0.09199805695845642},{"game":10003,"score":0.09144754083657802},{"game":10250,"score":0.09142524158435483},{"game":12065,"score":0.09002359281502648},{"game":10791,"score":0.08473909724873832},{"game":10054,"score":0.0838640716291228},{"game":10081,"score":0.07987708162669138},{"game":11560,"score":0.0795080674140829},{"game":10870,"score":0.07401298284074784},{"game":9972,"score":0.07125964536342},{"game":9982,"score":0.07087258174367528},{"game":9952,"score":0.07002418941202618},{"game":10138,"score":0.06967128556918478},{"game":10266,"score":0.06943259399851787},{"game":9995,"score":0.06907549779125155},{"game":10069,"score":0.06860958466997924},{"game":11499,"score":0.06848739408511118},{"game":10146,"score":0.06836294075540628},{"game":9950,"score":0.06786098950456264},{"game":9888,"score":0.06601078547691179},{"game":9911,"score":0.065940792380625},{"game":9890,"score":0.063854478811252},{"game":10022,"score":0.06063370495057674},{"game":11144,"score":0.06017462048852594},{"game":9960,"score":0.059711262441805024},{"game":9975,"score":0.056866528979249376},{"game":11676,"score":0.05608028088787087},{"game":10062,"score":0.054785737382041955},{"game":10276,"score":0.05393189279579824},{"game":9933,"score":0.052640987915348325},{"game":9990,"score":0.051884509077184005},{"game":9947,"score":0.05150130716527679},{"game":9992,"score":0.050275519922853285},{"game":10243,"score":0.049010736409474065},{"game":9998,"score":0.04642600891666371},{"game":9980,"score":0.04619165951466264},{"game":9916,"score":0.042147507364910686},{"game":10224,"score":0.04173659613845171},{"game":10215,"score":0.04058503061336305},{"game":9876,"score":0.0388534717051211},{"game":9909,"score":0.038225175665012046},{"game":10067,"score":0.038045495349352476},{"game":10035,"score":0.03764578379609529},{"game":10145,"score":0.03673220340915195},{"game":9897,"score":0.03631225645311875},{"game":10859,"score":0.03593545921217972},{"game":10143,"score":0.03502431416505092},{"game":9946,"score":0.034980158613072077},{"game":9962,"score":0.03277502374813014},{"game":9965,"score":0.03160837838270958},{"game":9979,"score":0.0311608387030462},{"game":10030,"score":0.02965039919552727},{"game":9964,"score":0.025118347789675532},{"game":9985,"score":0.02343578069901931},{"game":9896,"score":0.02319047310827238},{"game":9974,"score":0.02294273235519706},{"game":9919,"score":0.02254067693586207},{"game":10029,"score":0.021344125541810477},{"game":10080,"score":0.01934502753638312},{"game":11033,"score":0.016266583462661268},{"game":9921,"score":0.01620289104067081},{"game":9889,"score":0.011663724139466439},{"game":9767,"score":0.011483253051689221},{"game":9773,"score":0.011186445208498465},{"game":9996,"score":0.011153006134338755},{"game":9956,"score":0.01070296718316488},{"game":9951,"score":0.010586609019265766},{"game":11032,"score":0.008888720066108184},{"game":9977,"score":0.0032566681967566014},{"game":10002,"score":0.0030427512735444525},{"game":10031,"score":0.001635064483334267},{"game":9920,"score":0.001314890632911049},{"game":12078,"score":0.0012642367895206452},{"game":9955,"score":9.261107361040605E-4},{"game":9892,"score":8.682555192110492E-4},{"game":9918,"score":8.325191079640989E-4},{"game":10024,"score":7.117296924778801E-4},{"game":9923,"score":6.3752070584892E-4},{"game":9925,"score":5.516066982775869E-4},{"game":10025,"score":2.9303319574932978E-5},{"game":9759,"score":0.0},{"game":9782,"score":0.0},{"game":9784,"score":0.0},{"game":9818,"score":0.0},{"game":9879,"score":0.0},{"game":9880,"score":0.0},{"game":9881,"score":0.0},{"game":9882,"score":0.0},{"game":9883,"score":0.0},{"game":9886,"score":0.0},{"game":9887,"score":0.0},{"game":9891,"score":0.0},{"game":9894,"score":0.0},{"game":9898,"score":0.0},{"game":9900,"score":0.0},{"game":9901,"score":0.0},{"game":9902,"score":0.0},{"game":9903,"score":0.0},{"game":9904,"score":0.0},{"game":9905,"score":0.0},{"game":9907,"score":0.0},{"game":9908,"score":0.0},{"game":9913,"score":0.0},{"game":9914,"score":0.0},{"game":9915,"score":0.0},{"game":9917,"score":0.0},{"game":9922,"score":0.0},{"game":9926,"score":0.0},{"game":9927,"score":0.0},{"game":9929,"score":0.0},{"game":9930,"score":0.0},{"game":9931,"score":0.0},{"game":9935,"score":0.0},{"game":9936,"score":0.0},{"game":9937,"score":0.0},{"game":9938,"score":0.0},{"game":9939,"score":0.0},{"game":9940,"score":0.0},{"game":9941,"score":0.0},{"game":9942,"score":0.0},{"game":9943,"score":0.0},{"game":9944,"score":0.0},{"game":9945,"score":0.0},{"game":9948,"score":0.0},{"game":9953,"score":0.0},{"game":9954,"score":0.0},{"game":9957,"score":0.0},{"game":9958,"score":0.0},{"game":9963,"score":0.0},{"game":9967,"score":0.0},{"game":9968,"score":0.0},{"game":9969,"score":0.0},{"game":9970,"score":0.0},{"game":9976,"score":0.0},{"game":9986,"score":0.0},{"game":9987,"score":0.0},{"game":9988,"score":0.0},{"game":9989,"score":0.0},{"game":9991,"score":0.0},{"game":9993,"score":0.0},{"game":9994,"score":0.0},{"game":9997,"score":0.0},{"game":9999,"score":0.0},{"game":10001,"score":0.0},{"game":10021,"score":0.0},{"game":10026,"score":0.0},{"game":10028,"score":0.0},{"game":10032,"score":0.0},{"game":10033,"score":0.0},{"game":10034,"score":0.0},{"game":10050,"score":0.0},{"game":10051,"score":0.0},{"game":10052,"score":0.0},{"game":10053,"score":0.0},{"game":10055,"score":0.0},{"game":10061,"score":0.0},{"game":10070,"score":0.0},{"game":10071,"score":0.0},{"game":10072,"score":0.0},{"game":10073,"score":0.0},{"game":10077,"score":0.0},{"game":11585,"score":0.0},{"game":9924,"score":-5.3868712395419016E-5},{"game":10023,"score":-4.426429280432933E-4},{"game":9928,"score":-9.507832209640099E-4},{"game":9895,"score":-9.668235887025228E-4},{"game":9983,"score":-0.0010342308452114812},{"game":9885,"score":-0.0011207965538412717},{"game":9932,"score":-0.0026506856969487},{"game":9966,"score":-0.004198887734981116},{"game":11579,"score":-0.006552329372986707},{"game":11580,"score":-0.007273879561168012},{"game":9949,"score":-0.01387926242353639},{"game":11583,"score":-0.01499399044203581},{"game":9984,"score":-0.01842184533073507},{"game":11581,"score":-0.02223784039336474},{"game":9961,"score":-0.025002081955749045},{"game":9959,"score":-0.027154371413048217},{"game":9973,"score":-0.0331485764025613},{"game":10184,"score":-0.03364791356765251}],"isOriginal":false} 
```

Top 5 of the recommended games above:

```
10142 - Starburst
10027 - GonzosQuest
12120 - GunsN’Roses
10857 - TwinSpin
10140 - JackandtheBeanstalk
```